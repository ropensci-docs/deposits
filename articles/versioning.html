<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="deposits">
<title>Publication and versioning • deposits</title>
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://docs.ropensci.org/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Publication and versioning">
<meta property="og:description" content="deposits">
<meta property="og:image" content="https://docs.ropensci.org/deposits/logo.png">
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Matomo --><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css">
<script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript>
<!-- End Matomo Code -->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    <a href="https://ropensci.org" class="external-link"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
    <a class="navbar-brand me-2" href="../index.html">deposits</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.2.1.057</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="nav-link" href="../articles/deposits.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/deposits-R6.html">The deposits R6 client</a>
    <a class="dropdown-item" href="../articles/frictionless.html">frictionless workflows with deposits</a>
    <a class="dropdown-item" href="../articles/install-setup.html">Installation and Setup</a>
    <a class="dropdown-item" href="../articles/metadata.html">deposits metadata</a>
    <a class="dropdown-item" href="../articles/versioning.html">Publication and versioning</a>
    <a class="dropdown-item" href="../articles/workflow.html">Example deposits workflow</a>
  </div>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ropenscilabs/deposits/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Publication and versioning</h1>
                        <h4 data-toc-skip class="author">Mark Padgham</h4>
            
            <h4 data-toc-skip class="date">2024-03-20</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ropenscilabs/deposits/blob/HEAD/vignettes/versioning.Rmd" class="external-link"><code>vignettes/versioning.Rmd</code></a></small>
      <div class="d-none name"><code>versioning.Rmd</code></div>
    </div>

    
    
<p>The <a href="https://docs.ropensci.org/deposits/articles/deposits.html#publishing-a-deposit">main</a> and <a href="https://docs.ropensci.org/deposits/articles/workflow.html#publishing-a-deposit">example workflow</a> vignettes both finish with publication. While publication of data may often be viewed as a singular act, after which data remain indefinitely available in the same static state in which they were first published, data may also evolve and develop after initial publication. The versioning abilities of deposits allow for updated versions of deposits to be created and published. A single static URL will then generally resolve to the latest published version, yet all previous versions will also remain accessible.</p>
<p>Not all host systems have explicit interfaces for version control, and so deposits offers two distinct versioning process: one for host systems which explicitly record version numbers, and another for those without. In all cases, versioning is only applicable to <em>published</em> deposits. Private deposits may only exist in a single version, and these versioning functions will generally not be able to be applied.</p>
<div class="section level2">
<h2 id="explicit-version-control">Explicit version control<a class="anchor" aria-label="anchor" href="#explicit-version-control"></a>
</h2>
<p>Zenodo offers explicit control over versioning, enabling all aspects including version numbers of deposits, to be specified and updated when desired. This vignette presumes that a copy of a published deposit also exists locally, and that aspects of data and/or metadata in this local version have been updated, and so differ from those in the published version. The first step is to retrieve the published version, and fill a client with the updated metadata. This is done by passing the local <code>path</code> to the directory containing the deposit to the <a href="https://docs.ropensci.org/deposits/reference/depositsClient.html#method-deposit-fill-metadata-"><code>deposit_fill_metadata()</code> method</a> method. This code also uses the Zenodo “sandbox” environment to trial the functions without publication on Zenodo itself.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span> <span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/deposits/">deposits</a></span><span class="op">)</span></span>
<span><span class="va">cli</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/depositsClient.html">depositsClient</a></span><span class="op">$</span><span class="fu">new</span> <span class="op">(</span>service <span class="op">=</span> <span class="st">"zenodo"</span>, sandbox <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">my_id</span> <span class="op">&lt;-</span> <span class="va">cli</span><span class="op">$</span><span class="va">deposits</span><span class="op">$</span><span class="va">id</span> <span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="co"># select deposit to retreive</span></span>
<span><span class="va">cli</span><span class="op">$</span><span class="fu">deposit_retrieve</span> <span class="op">(</span><span class="va">my_id</span><span class="op">)</span></span>
<span><span class="co"># path &lt;- "/&lt;local&gt;/&lt;path&gt;/&lt;to&gt;/&lt;deposit&gt;/"</span></span>
<span><span class="va">path</span> <span class="op">&lt;-</span> <span class="st">"/data/mega/code/repos/pre-processing-r/typetracer"</span></span>
<span><span class="va">cli</span><span class="op">$</span><span class="fu">deposit_fill_metadata</span> <span class="op">(</span><span class="va">path</span><span class="op">)</span></span></code></pre></div>
<p>A new version can then be created by calling:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cli</span><span class="op">$</span><span class="fu">deposit_version</span> <span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>The client will then reveal a different, updated deposit ID value and corresponding URL. Clicking on that (or copying into a web browser) will then open a page in “edit” mode, containing the updated metadata fields. The new version can then be published with the <a href="https://docs.ropensci.org/deposits/reference/depositsClient.html#method-deposit-publish-"><code>deposit_publish()</code> method</a>. The primary URL of the deposit will then resolve to the latest published version.</p>
<p>Versions can be edited and updated as described in the <a href="https://docs.ropensci.org/deposits/articles/deposits.html#editing-and-updating-deposits">main</a> and <a href="https://docs.ropensci.org/deposits/articles/workflow.html">workflow</a> vignettes, through using the <a href="https://docs.ropensci.org/deposits/reference/depositsClient.html#method-deposit-update-"><code>deposit_update()</code> method</a>. Versions created with the <a href="https://docs.ropensci.org/deposits/reference/depositsClient.html#method-deposit-version-"><code>deposit_version()</code> method</a> remain private until published. These versions may also be cancelled or deleted by calling <a href="https://docs.ropensci.org/deposits/reference/depositsClient.html#method-deposit-delete-"><code>cli$deposit_delete()</code></a>.</p>
</div>
<div class="section level2">
<h2 id="services-without-explicit-version-control">Services without explicit version control<a class="anchor" aria-label="anchor" href="#services-without-explicit-version-control"></a>
</h2>
<p>Figshare does not offer explicit control of versions. Instead, a deposit may be edited at any time. Re-publishing an edited deposit then increments an internal version number, from 1 to 2 for a first version, and further increments for subsequent versions. The <a href="https://docs.ropensci.org/deposits/reference/depositsClient.html#method-deposit-version-"><code>deposit_version()</code> method</a> described above only applies to service with explicit version control. New versions on Figshare may be created from deposits by updating metadata (for example, by using the <a href="https://docs.ropensci.org/deposits/reference/depositsClient.html#method-deposit-fill-metadata-"><code>deposit_fill_metadata()</code> method</a> demonstrated above, and then calling these two methods:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cli</span><span class="op">$</span><span class="fu">deposit_update</span> <span class="op">(</span><span class="op">)</span></span>
<span><span class="va">cli</span><span class="op">$</span><span class="fu">deposit_publish</span> <span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>The only difference to the workflow for Zenodo is that <a href="https://docs.ropensci.org/deposits/reference/depositsClient.html#method-deposit-update-"><code>deposit_update()</code> method</a> is called instead of <a href="https://docs.ropensci.org/deposits/reference/depositsClient.html#method-deposit-version-"><code>deposit_version()</code> method</a>. Any updates created with the <a href="https://docs.ropensci.org/deposits/reference/depositsClient.html#method-deposit-update-"><code>deposit_update()</code> method</a> are private until published. These updates may also be cancelled or deleted by calling <a href="https://docs.ropensci.org/deposits/reference/depositsClient.html#method-deposit-delete-"><code>cli$deposit_delete()</code></a>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start top-4 bottom-8">
            <div class="col-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg">
</div>
            <div class="col-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-github"></div></a>
                        <a href="https://github.com/ropenscilabs" target="_blank" class="external-link"><div class="icon fa fa-flask"></div></a>
                        <a href="https://hachyderm.io/@ropensci" target="_blank" class="external-link"><div class="icon fab fa-mastodon"></div></a>
                        <a href="https://vimeo.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about" class="external-link">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review" class="external-link">Software Review</a></li>
                            <li><a href="https://ropensci.org/about#team" class="external-link">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers" class="external-link">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate" class="external-link">Donate</a></li>
                            <li><a href="https://ropensci.org/contact" class="external-link">Contact Us</a></li>
                        </ul>
</div>
                    <div class="col-md-3 col-sm-4">
                        <ul>
<h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/" class="external-link">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/" class="external-link">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/" class="external-link">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/" class="external-link">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct" class="external-link">Code of conduct</a></li>
                        </ul>
</div>
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/" class="external-link">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/" class="external-link">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/" class="external-link">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/" class="external-link">Documentation</a></li>
                            <li><a href="https://ropensci.org/news/" class="external-link">Newsletter</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/" class="external-link">Cite rOpenSci</a></li>
                        </ul>
</div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" class="external-link">NumFOCUS</a>.</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->


    </footer>
</div>

  

  

  </body>
</html>
