<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="deposits">
<title>deposits metadata • deposits</title>
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://docs.ropensci.org/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="deposits metadata">
<meta property="og:description" content="deposits">
<meta property="og:image" content="https://docs.ropensci.org/deposits/logo.png">
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Matomo --><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css">
<script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript>
<!-- End Matomo Code -->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    <a href="https://ropensci.org" class="external-link"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
    <a class="navbar-brand me-2" href="../index.html">deposits</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.2.1.057</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="nav-link" href="../articles/deposits.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/deposits-R6.html">The deposits R6 client</a>
    <a class="dropdown-item" href="../articles/frictionless.html">frictionless workflows with deposits</a>
    <a class="dropdown-item" href="../articles/install-setup.html">Installation and Setup</a>
    <a class="dropdown-item" href="../articles/metadata.html">deposits metadata</a>
    <a class="dropdown-item" href="../articles/versioning.html">Publication and versioning</a>
    <a class="dropdown-item" href="../articles/workflow.html">Example deposits workflow</a>
  </div>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ropenscilabs/deposits/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>deposits metadata</h1>
                        <h4 data-toc-skip class="author">Mark Padgham</h4>
            
            <h4 data-toc-skip class="date">2024-03-20</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ropenscilabs/deposits/blob/HEAD/vignettes/metadata.Rmd" class="external-link"><code>vignettes/metadata.Rmd</code></a></small>
      <div class="d-none name"><code>metadata.Rmd</code></div>
    </div>

    
    
<p>This vignette demonstrates procedures for specifying and validate metadata for the deposits package. This vignette will use metadata for the two “beaver” datasets provided with R’s <a href="https://stat.ethz.ch/R-manual/R-devel/library/datasets/html/beavers.html" class="external-link">“datasets” package</a>. Relevant metadata for these datasets are given in the “Source” listed on that page (or <code><a href="https://rdrr.io/r/datasets/beavers.html" class="external-link">?beaver1</a></code> to see a local version):</p>
<blockquote>
<p>P. S. Reynolds (1994) <em>Time-series analyses of beaver body temperatures.</em> Chapter 11 of Lange, N., Ryan, L., Billard, L., Brillinger, D., Conquest, L. and Greenhouse, J. eds (1994) Case Studies in Biometry. New York: John Wiley and Sons.</p>
</blockquote>
<div class="section level2">
<h2 id="dublin-core-metadata">Dublin Core Metadata<a class="anchor" aria-label="anchor" href="#dublin-core-metadata"></a>
</h2>
<p>The metadata structure used by deposits follows the specifications of the <a href="https://www.dublincore.org/specifications/dublin-core/dcmi-terms/" class="external-link">Dublin Core Metadata Initiative</a>. Users do not need to understand or read any documents on the DCMI structure, as the implementation is explicitly contained within <a href="https://github.com/ropenscilabs/deposits/blob/main/inst/extdata/dc/schema.json" class="external-link">the package’s “dc/schema.json” file</a>. That file should be the only document needed to understand metadata compliance for deposits. It may nevertheless be instructive to examine the DCMI specifications, in order to understand individual terms in a broader context.</p>
</div>
<div class="section level2">
<h2 id="metadata-validation">Metadata Validation<a class="anchor" aria-label="anchor" href="#metadata-validation"></a>
</h2>
<p>Metadata in deposits are validated against <a href="https://json-schema.org" class="external-link">JSON schemas</a>, with the schema for the main “metadata” field contained in <a href="https://github.com/ropenscilabs/deposits/blob/main/inst/extdata/dc/schema.json" class="external-link">the package’s “dc/schema.json” file</a>. This schema file includes detailed specifications for every metadata term used in deposits. The list of terms can also be viewed directly with <a href="https://docs.ropensci.org/deposits/reference/dcmi_terms.html">the <code>dcmi_terms()</code> function</a>. This validation procedure is intended to issue instructive errors throughout when metadata do not conform to the expected format, with this vignette demonstrating several such error messages.</p>
<p>Let’s start with a minimal version of the metadata list shown above, and try to validate that using <a href="https://docs.ropensci.org/deposits/reference/depositsClient.html#method-deposit-fill-metadata-">the <code>deposit_fill_metadata()</code> method</a>:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">metadata</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span> <span class="op">(</span></span>
<span>    author <span class="op">=</span> <span class="st">"P.S. Reynolds"</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"Time-series analyses of beaver body temperatures."</span></span>
<span><span class="op">)</span></span>
<span><span class="va">cli</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/depositsClient.html">depositsClient</a></span><span class="op">$</span><span class="fu">new</span> <span class="op">(</span>service <span class="op">=</span> <span class="st">"zenodo"</span>, sandbox <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">cli</span><span class="op">$</span><span class="fu">deposit_fill_metadata</span> <span class="op">(</span><span class="va">metadata</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;   instancePath             schemaPath              keyword additionalProperty</span></span>
<span><span class="co">#&gt; 1              #/additionalProperties additionalProperties             author</span></span>
<span><span class="co">#&gt;                               message</span></span>
<span><span class="co">#&gt; 1 must NOT have additional properties</span></span>
<span><span class="co">#&gt; Error: Stopping because the DCMI metadata terms listed above do not conform with the expected schema.</span></span></code></pre>
<p>That error tells us that “author” is an additional property, and that the metadata “must NOT have additional properties.” These “additional properties” refer to any beyond those specified in the schema. The schema used to validate deposits metadata is contained in <a href="https://github.com/ropenscilabs/deposits/blob/main/inst/extdata/dc/schema.json" class="external-link">the package’s <code>dc/schema.json</code> file</a>. A copy of that file is included with each installation of this package in the location given by,</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span> <span class="op">(</span><span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/path.html" class="external-link">path</a></span> <span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"dc"</span>, <span class="st">"schema.json"</span><span class="op">)</span>, package <span class="op">=</span> <span class="st">"deposits"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "/usr/local/lib/R/site-library/deposits/extdata/dc/schema.json"</span></span></code></pre></div>
<p>Searching for “author” either on the GitHub version or a local file will quickly reveal that author information belongs in a field called “creator”. Renaming that metadata item then gives,</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">metadata</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span> <span class="op">(</span></span>
<span>    creator <span class="op">=</span> <span class="st">"P.S. Reynolds"</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"Time-series analyses of beaver body temperatures."</span></span>
<span><span class="op">)</span></span>
<span><span class="va">cli</span><span class="op">$</span><span class="fu">deposit_fill_metadata</span> <span class="op">(</span><span class="va">metadata</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;   instancePath                        schemaPath keyword  type</span></span>
<span><span class="co">#&gt; 1     /creator #/properties/creator/anyOf/0/type    type array</span></span>
<span><span class="co">#&gt; 2     /creator #/properties/creator/anyOf/1/type    type array</span></span>
<span><span class="co">#&gt; 3     /creator        #/properties/creator/anyOf   anyOf  &lt;NA&gt;</span></span>
<span><span class="co">#&gt;                        message required</span></span>
<span><span class="co">#&gt; 1                must be array     name</span></span>
<span><span class="co">#&gt; 2                must be array     name</span></span>
<span><span class="co">#&gt; 3 must match a schema in anyOf     &lt;NA&gt;</span></span>
<span><span class="co">#&gt; Error: Stopping because the DCMI metadata terms listed above do not conform with the expected schema.</span></span></code></pre>
<p>The first messages say that the “creator” property “must be array”. Arrays in JSON are <code>list</code> objects in R, so this suggests the next required modification:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">metadata</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span> <span class="op">(</span></span>
<span>    creator <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span> <span class="op">(</span><span class="st">"P.S. Reynolds"</span><span class="op">)</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"Time-series analyses of beaver body temperatures."</span></span>
<span><span class="op">)</span></span>
<span><span class="va">cli</span><span class="op">$</span><span class="fu">deposit_fill_metadata</span> <span class="op">(</span><span class="va">metadata</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;   instancePath                              schemaPath keyword   type</span></span>
<span><span class="co">#&gt; 1   /creator/0 #/properties/creator/anyOf/0/items/type    type object</span></span>
<span><span class="co">#&gt; 2   /creator/0 #/properties/creator/anyOf/1/items/type    type object</span></span>
<span><span class="co">#&gt; 3     /creator              #/properties/creator/anyOf   anyOf   &lt;NA&gt;</span></span>
<span><span class="co">#&gt;                        message required</span></span>
<span><span class="co">#&gt; 1               must be object     name</span></span>
<span><span class="co">#&gt; 2               must be object     name</span></span>
<span><span class="co">#&gt; 3 must match a schema in anyOf     &lt;NA&gt;</span></span>
<span><span class="co">#&gt; Error: Stopping because the DCMI metadata terms listed above do not conform with the expected schema.</span></span></code></pre>
<p>The items within the “creator” field must now be of type “object.” R being the relatively simply language that it is, “objects” are also <code>list</code>s, leading us to:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">metadata</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span> <span class="op">(</span></span>
<span>    creator <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span> <span class="op">(</span><span class="st">"P.S. Reynolds"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"Time-series analyses of beaver body temperatures."</span></span>
<span><span class="op">)</span></span>
<span><span class="va">cli</span><span class="op">$</span><span class="fu">deposit_fill_metadata</span> <span class="op">(</span><span class="va">metadata</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;   instancePath                              schemaPath keyword   type</span></span>
<span><span class="co">#&gt; 1   /creator/0 #/properties/creator/anyOf/0/items/type    type object</span></span>
<span><span class="co">#&gt; 2   /creator/0 #/properties/creator/anyOf/1/items/type    type object</span></span>
<span><span class="co">#&gt; 3     /creator              #/properties/creator/anyOf   anyOf   &lt;NA&gt;</span></span>
<span><span class="co">#&gt;                        message required</span></span>
<span><span class="co">#&gt; 1               must be object     name</span></span>
<span><span class="co">#&gt; 2               must be object     name</span></span>
<span><span class="co">#&gt; 3 must match a schema in anyOf     &lt;NA&gt;</span></span>
<span><span class="co">#&gt; Error: Stopping because the DCMI metadata terms listed above do not conform with the expected schema.</span></span></code></pre>
<p>And that generates the same error. Looking a bit further in the error output reveals that the object has a “required” property of “name”. More generally, for any instances in which the error messages themselves are not helpful, it is useful to refer to the <a href="https://github.com/ropenscilabs/deposits/blob/main/inst/extdata/dc/schema.json" class="external-link">actual JSON schema</a> (or a local version). The “creator” field expected for the Zenodo service can then be seen to accept the properties, “name”, “affiliation”, “orcid”, and “gnd”, with the “name” property being required, as indicated by the error message.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">metadata</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span> <span class="op">(</span></span>
<span>    creator <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span> <span class="op">(</span>name <span class="op">=</span> <span class="st">"P.S. Reynolds"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"Time-series analyses of beaver body temperatures."</span></span>
<span><span class="op">)</span></span>
<span><span class="va">cli</span><span class="op">$</span><span class="fu">deposit_fill_metadata</span> <span class="op">(</span><span class="va">metadata</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;   instancePath                     schemaPath  keyword missingProperty</span></span>
<span><span class="co">#&gt; 1    /metadata #/properties/metadata/required required     description</span></span>
<span><span class="co">#&gt;                                     message</span></span>
<span><span class="co">#&gt; 1 must have required property 'description'</span></span>
<span><span class="co">#&gt; Error: Stopping because the metadata terms listed above do not conform with the expected schema for the zenodo service.</span></span></code></pre>
<p>That error seems to indicate that our “creator” field is then valid, yet triggers a further error that that metadata “must have required property ‘description’”. Let’s add that:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">metadata</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span> <span class="op">(</span></span>
<span>    creator <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span> <span class="op">(</span>name <span class="op">=</span> <span class="st">"P.S. Reynolds"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"Time-series analyses of beaver body temperatures."</span>,</span>
<span>    description <span class="op">=</span> <span class="st">"Original source of 'beaver' data, in Chapter 11 of  Lange, N., Ryan, L., Billard, L., Brillinger, D., Conquest, L. and Greenhouse, J. eds (1994) Case Studies in Biometry."</span></span>
<span><span class="op">)</span></span>
<span><span class="va">cli</span><span class="op">$</span><span class="fu">deposit_fill_metadata</span> <span class="op">(</span><span class="va">metadata</span><span class="op">)</span></span></code></pre></div>
<p>That now works, although that does not capture the full metadata shown above from <code><a href="https://rdrr.io/r/datasets/beavers.html" class="external-link">?beaver1</a></code>. We still need information on the publisher. Examining the JSON schema shows that it includes a “publisher” field which is expected to be a string.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">metadata</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span> <span class="op">(</span></span>
<span>    creator <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span> <span class="op">(</span>name <span class="op">=</span> <span class="st">"P.S. Reynolds"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"Time-series analyses of beaver body temperatures."</span>,</span>
<span>    description <span class="op">=</span> <span class="st">"Original source of 'beaver' data, in Chapter 11 of  Lange, N., Ryan, L., Billard, L., Brillinger, D., Conquest, L. and Greenhouse, J. eds (1994) Case Studies in Biometry."</span>,</span>
<span>    publisher <span class="op">=</span> <span class="st">"John Wiley and Sons"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">cli</span><span class="op">$</span><span class="fu">deposit_fill_metadata</span> <span class="op">(</span><span class="va">metadata</span><span class="op">)</span></span></code></pre></div>
<p>We may then wish to specify a date on which the resource was created. Searching for “date” in the schema itself reveals that there is a “date” field, but it is intended to describe, “A point or period of time associated with an event in the lifecycle of the resource.” There are various other “date” fields, but the one we want is pretty clearly the “created” field, which is expected to be a string in either “date” or “date-time” format. Let’s try a simple “date”:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">metadata</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span> <span class="op">(</span></span>
<span>    creator <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span> <span class="op">(</span>name <span class="op">=</span> <span class="st">"P.S. Reynolds"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    created <span class="op">=</span> <span class="st">"1994-01-01"</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"Time-series analyses of beaver body temperatures."</span>,</span>
<span>    description <span class="op">=</span> <span class="st">"Original source of 'beaver' data, in Chapter 11 of  Lange, N., Ryan, L., Billard, L., Brillinger, D., Conquest, L. and Greenhouse, J. eds (1994) Case Studies in Biometry."</span>,</span>
<span>    publisher <span class="op">=</span> <span class="st">"John Wiley and Sons"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">cli</span><span class="op">$</span><span class="fu">deposit_fill_metadata</span> <span class="op">(</span><span class="va">metadata</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;   instancePath                  schemaPath keyword    format</span></span>
<span><span class="co">#&gt; 1     /created #/properties/created/format  format date-time</span></span>
<span><span class="co">#&gt;                         message</span></span>
<span><span class="co">#&gt; 1 must match format "date-time"</span></span>
<span><span class="co">#&gt; Error: Stopping because the metadata terms listed above do not conform with the expected schema for the zenodo service.</span></span></code></pre>
<p>That then fails because “created” must match the format “date-time”, even though the main JSON schema clearly indicates that either date or date-time strings are acceptable. This error reflects the fact that validation of deposits metadata is a two-stage process. The metadata are first validated against the general JSON schema described above, then converted to formats expected for the nominated deposits service, and the result is then validated again against a service-specific JSON schema. In this case, the Zenodo service itself requires “created” fields to have “date-time”, and not “date”, format.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">metadata</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span> <span class="op">(</span></span>
<span>    creator <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span> <span class="op">(</span>name <span class="op">=</span> <span class="st">"P.S. Reynolds"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    created <span class="op">=</span> <span class="st">"1994-01-01T00:00:00"</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"Time-series analyses of beaver body temperatures."</span>,</span>
<span>    description <span class="op">=</span> <span class="st">"Original source of 'beaver' data, in Chapter 11 of  Lange, N., Ryan, L., Billard, L., Brillinger, D., Conquest, L. and Greenhouse, J. eds (1994) Case Studies in Biometry."</span>,</span>
<span>    publisher <span class="op">=</span> <span class="st">"John Wiley and Sons"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">cli</span><span class="op">$</span><span class="fu">deposit_fill_metadata</span> <span class="op">(</span><span class="va">metadata</span><span class="op">)</span></span></code></pre></div>
<p>That metadata is then finally in a valid format for the Zenodo service. An instructive exercise is to change the service to “figshare”, and use the resultant error messages to tweak the metadata to the expected format for a Figshare deposit.</p>
<div class="section level3">
<h3 id="metadata-to-specify-connections-between-deposits">Metadata to specify connections between deposits<a class="anchor" aria-label="anchor" href="#metadata-to-specify-connections-between-deposits"></a>
</h3>
<p>The schema permits many other fields, importantly including fields intended to be used by the deposits package to document and identify connections between different data resources. These include “hasPart”, “hasVersion”, “isPartOf”, “isReferencedBy”, “isReplacedBy”, “isRequiredBy”, and “isVersionOf”. Specifying these allows one deposit to be connected to others. One of the aims of the deposits package is to facilitate specification of these kinds of metadata, and so to enhance an ability to inter-connect and inter-relate different data depositions, providing insight into a growing ecosystem of inter-connected deposits.</p>
<p>These “is” and “has” metadata fields have complex structures, but again the JSON schemas can and should be used to understand the expected format. The <code>isPartOf</code> field for Zenodo is expected to by an array (in R terms, a <code>list</code>) of objects, each of which must have an “identifier” and “relation”, and may also have a “resource_type”.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">metadata</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span> <span class="op">(</span></span>
<span>    creator <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span> <span class="op">(</span>name <span class="op">=</span> <span class="st">"P.S. Reynolds"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    created <span class="op">=</span> <span class="st">"1994-01-01T00:00:00"</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"Time-series analyses of beaver body temperatures."</span>,</span>
<span>    description <span class="op">=</span> <span class="st">"Original source of 'beaver' data, in Chapter 11 of  Lange, N., Ryan, L., Billard, L., Brillinger, D., Conquest, L. and Greenhouse, J. eds (1994) Case Studies in Biometry."</span>,</span>
<span>    publisher <span class="op">=</span> <span class="st">"John Wiley and Sons"</span>,</span>
<span>    isPartOf <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span> <span class="op">(</span></span>
<span>        identifier <span class="op">=</span> <span class="st">"Case Studies in Biometry"</span>,</span>
<span>        relation <span class="op">=</span> <span class="st">"isPartOf"</span></span>
<span>    <span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">cli</span><span class="op">$</span><span class="fu">deposit_fill_metadata</span> <span class="op">(</span><span class="va">metadata</span><span class="op">)</span></span></code></pre></div>
<p>While those metadata are successfully validated, attempting to create that deposit on Zenodo would trigger an error, because the “identifier” must conform to an expected type. The JSON schema should as always be considered the definitive reference, and that states for “identifier” that:</p>
<blockquote>
<p>“Supported identifiers include: DOI, Handle, ARK, PURL, ISSN, ISBN, PubMed ID, PubMed Central ID, ADS Bibliographic Code, arXiv, Life Science Identifiers (LSID), EAN-13, ISTC, URNs and URLs.”</p>
</blockquote>
<p>The “Case Studies in Biometry” book has an “ARK” identifier which can be used here,</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">metadata</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span> <span class="op">(</span></span>
<span>    creator <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span> <span class="op">(</span>name <span class="op">=</span> <span class="st">"P.S. Reynolds"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    created <span class="op">=</span> <span class="st">"1994-01-01T00:00:00"</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"Time-series analyses of beaver body temperatures."</span>,</span>
<span>    description <span class="op">=</span> <span class="st">"Original source of 'beaver' data, in Chapter 11 of  Lange, N., Ryan, L., Billard, L., Brillinger, D., Conquest, L. and Greenhouse, J. eds (1994) Case Studies in Biometry."</span>,</span>
<span>    publisher <span class="op">=</span> <span class="st">"John Wiley and Sons"</span>,</span>
<span>    isPartOf <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span> <span class="op">(</span></span>
<span>        identifier <span class="op">=</span> <span class="st">"ark:/13960/t0mt2n370"</span>,</span>
<span>        relation <span class="op">=</span> <span class="st">"isPartOf"</span></span>
<span>    <span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">cli</span><span class="op">$</span><span class="fu">deposit_fill_metadata</span> <span class="op">(</span><span class="va">metadata</span><span class="op">)</span></span></code></pre></div>
<p>Examining the JSON schema also reveals that “isPartOf” allows one additional field of “resource_type”, which has to be an upload, publication, or image type followed by a type specification. These type specifications are included in the second JSON schema used to validate Zenodo-specific metadata. The <a href="https://github.com/ropenscilabs/deposits/blob/main/inst/extdata/zenodo/schema.json" class="external-link">GitHub version can be seen here</a>, or the location of the locally-installed version found with,</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span> <span class="op">(</span><span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/path.html" class="external-link">path</a></span> <span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"zenodo"</span>, <span class="st">"schema.json"</span><span class="op">)</span>, package <span class="op">=</span> <span class="st">"deposits"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "/usr/local/lib/R/site-library/deposits/extdata/zenodo/schema.json"</span></span></code></pre></div>
<p>This schema then reveals the accepted types for “publication” include “book”, so the “resource_type” becomes “publication-book”:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">metadata</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span> <span class="op">(</span></span>
<span>    creator <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span> <span class="op">(</span>name <span class="op">=</span> <span class="st">"P.S. Reynolds"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    created <span class="op">=</span> <span class="st">"1994-01-01T00:00:00"</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"Time-series analyses of beaver body temperatures."</span>,</span>
<span>    description <span class="op">=</span> <span class="st">"Original source of 'beaver' data, in Chapter 11 of  Lange, N., Ryan, L., Billard, L., Brillinger, D., Conquest, L. and Greenhouse, J. eds (1994) Case Studies in Biometry."</span>,</span>
<span>    publisher <span class="op">=</span> <span class="st">"John Wiley and Sons"</span>,</span>
<span>    isPartOf <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span> <span class="op">(</span></span>
<span>        identifier <span class="op">=</span> <span class="st">"ark:/13960/t0mt2n370"</span>,</span>
<span>        relation <span class="op">=</span> <span class="st">"isPartOf"</span>,</span>
<span>        resource_type <span class="op">=</span> <span class="st">"publication-book"</span></span>
<span>    <span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">cli</span><span class="op">$</span><span class="fu">deposit_fill_metadata</span> <span class="op">(</span><span class="va">metadata</span><span class="op">)</span></span></code></pre></div>
<p>Finally we can confirm that those metadata are in a format which will be accepted on our specific Zenodo service by creating a new deposit:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cli</span><span class="op">$</span><span class="fu">deposit_new</span> <span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; ID of new deposit : 1186243</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span> <span class="op">(</span><span class="va">cli</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;deposits client&gt;</span></span>
<span><span class="co">#&gt;  deposits service : zenodo</span></span>
<span><span class="co">#&gt;            sandbox: TRUE</span></span>
<span><span class="co">#&gt;          url_base : https://sandbox.zenodo.org/api/</span></span>
<span><span class="co">#&gt;  Current deposits : 1 (see 'deposits' element for details)</span></span>
<span><span class="co">#&gt;</span></span>
<span><span class="co">#&gt;  url_service : https://sandbox.zenodo.org/deposit/1186243</span></span>
<span><span class="co">#&gt;   deposit id : 1186243</span></span>
<span><span class="co">#&gt;     hostdata : list with 14  elements</span></span>
<span><span class="co">#&gt;     metadata : 6 terms (see 'metadata' element for details)</span></span></code></pre></div>
<p>And that deposit has been successfully created, with the Zenodo record populated with appropriately-translated versions of the metadata.</p>
</div>
</div>
<div class="section level2">
<h2 id="metadata-templates">Metadata templates<a class="anchor" aria-label="anchor" href="#metadata-templates"></a>
</h2>
<p>An alternative way to enter metadata into a deposits client is via a local JSON metadata file. <code>depostis</code> includes the function, <a href="https://docs.ropensci.org/deposits/reference/deposits_metadata_template.html"><code>deposits_metadata_template()</code></a>, which generates a local version of a complete template for all allowed metadata fields. Note that deposits workflows are generally expected to use metadata templates defined as part of <a href="https://frictionlessdata.io" class="external-link">a “frictionless” workflow</a>, as described in detail in the accompanying <a href="https://docs.ropensci.org/deposits/articles/frictionless.html">frictionless vignette</a>. The <a href="https://docs.ropensci.org/deposits/reference/deposits_metadata_template.html"><code>deposits_metadata_template()</code></a> is intended more for demonstration purposes, while a full frictionless template is generally preferred. The format of deposits metadata nevertheless remains the same in both.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/file_temp.html" class="external-link">file_temp</a></span> <span class="op">(</span>ext <span class="op">=</span> <span class="st">".json"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/deposits_metadata_template.html">deposits_metadata_template</a></span> <span class="op">(</span>filename <span class="op">=</span> <span class="va">f</span><span class="op">)</span></span>
<span><span class="co">#&gt; Edit the file [/tmp/Rtmpiaoffm/file70126117500.json] and remove everything except the metadata fields you require.</span></span>
<span><span class="co">#&gt; The filename may be then passed as the 'metadata' argument to a 'deposits' client.</span></span></code></pre></div>
<p>That command issues an important note, given in even more detail in the first line of the resultant template:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span> <span class="op">(</span><span class="va">f</span><span class="op">)</span>, <span class="fl">2L</span><span class="op">)</span> <span class="op">[</span><span class="fl">2</span><span class="op">]</span></span>
<span><span class="co">#&gt; [1] "  \"_note\": \"Fields like this starting with underscores are comments. Please delete this field, and all fields in this template except for those you wish to use for your deposit. This template may NOT be used in anything like this default form to construct a 'deposits' client. Many values require editing to comply with expected formats described throughout, such as dates or fields expected to accord with some fixed vocabulary, or modification from text descriptions to JSON objects. Please refer to the main 'dc/schema' file of the 'deposits' package for full details.\","</span></span></code></pre></div>
<p>A version of that template modified to reflect the metadata defined above would then look like this:</p>
<pre><code><span><span class="co">#&gt; {</span></span>
<span><span class="co">#&gt;   "created": "1994-01-01T00:00:00",</span></span>
<span><span class="co">#&gt;   "creator": [</span></span>
<span><span class="co">#&gt;     {</span></span>
<span><span class="co">#&gt;       "name": "P.S. Reynolds"</span></span>
<span><span class="co">#&gt;     }</span></span>
<span><span class="co">#&gt;   ],</span></span>
<span><span class="co">#&gt;   "description": "Original source of 'beaver' data, in Chapter 11 of  Lange, N., Ryan, L., Billard, L., Brillinger, D., Conquest, L. and Greenhouse, J. eds (1994) Case Studies in Biometry.",</span></span>
<span><span class="co">#&gt;   "isPartOf": [</span></span>
<span><span class="co">#&gt;     {</span></span>
<span><span class="co">#&gt;       "identifier": "ark:/13960/t0mt2n370",</span></span>
<span><span class="co">#&gt;       "relation": "isPartOf",</span></span>
<span><span class="co">#&gt;       "resource_type": "publication-book"</span></span>
<span><span class="co">#&gt;     }</span></span>
<span><span class="co">#&gt;   ],</span></span>
<span><span class="co">#&gt;   "publisher": "John Wiley and Sons",</span></span>
<span><span class="co">#&gt;   "title": "Time-series analyses of beaver body temperatures."</span></span>
<span><span class="co">#&gt; }</span></span></code></pre>
<p>The format of each item within this JSON object then then matches the specifications of the <a href="https://github.com/ropenscilabs/deposits/blob/main/inst/extdata/dc/schema.json" class="external-link">main <code>dc/schema.json</code> file</a>. Note that that schema expects both the “creator” and “isPartOf” fields for Zenodo to be of type “array”. Arrays in JSON are defined by square brackets, <code>[ ... array contents ...]</code>. Both of these arrays are then expected to have items of type “object”, which in JSON are defined by curly brackets, <code>{ ... object contents ...}</code>.</p>
<p>Those are the only two key aspects of JSON specification required to understand and use metadata templates in deposits:</p>
<ul>
<li>A JSON “array” is defined within square brackets, and may contain any number of items: <code>[ ... array ...]</code>.</li>
<li>A JSON “object” is defined within curly brackets, and must generally follow a defined structure: <code>{ ... object ...}</code>.</li>
</ul>
<p>Both “array” and “object” items in JSON are represented in R terms as <code>list</code>s, so an array of objects simply becomes <code>list(list(...))</code>, as demonstrated in the first second of this vignette. (While this means that objects composed of arrays could cause confusion, these are relatively uncommon, and are not used in any of the JSON schemas within the deposits package.)</p>
<div class="section level3">
<h3 id="valid-json-files">Valid JSON Files<a class="anchor" aria-label="anchor" href="#valid-json-files"></a>
</h3>
<p>The schema for the “creator” field shown above requires (for Zenodo) an “array” of items, each of which is an “object” which must include a “name” field, and may include additional fields for “affiliation”, “orcid”, and “gnd”. An example JSON specification for “creator” would thus be:</p>
<pre><code>{
  "creator": [
    {
      "name": "A. Person",
      "orcid": "0000-0001-0002-0003"
    },
    {
      "name": "B. Person"
    }
  ]
}</code></pre>
<p>Because “creator” is an “array”, it may contain multiple unnamed items. In contrast, items within an “object” must generally be named, and schemas will generally expect single instances only of each item within an “object.” Switching the square and curly brackets in that definition would invalidate the JSON file, and would trigger an error in deposits.</p>
<p>Errors in the validation of JSON files themselves are, however, nowhere near as informative as errors arising through comparing JSON files with schemas. If a JSON file is itself invalid, the errors shown by deposits will generally be uninformative. It is therefore very important to ensure that JSON metadata files are formatted in a valid way. The easiest way to check validity before passing a metadata file to a deposits client is to use <a href="https://cran.r-project.org/package=jsonlite" class="external-link">the <code>validate()</code> function of the <code>jsonlite</code> package</a>. This function requires a string input, so should be called as <code>jsonlite::validate(readLines("metadata.json"))</code>.</p>
<p>This example demonstrates one important aspect of hand-writing JSON files, which is commas. Commas <strong>must</strong> be used to separate any sequential fields, and <strong>must not</strong> be placed at the end of any individual or sequence of fields. The first statement means that valid JSON requires commas like this:</p>
<pre><code>{
  "field1": "value1",
  "field2": "value2"
}</code></pre>
<p>That specification without the comma would not be valid. The second statement means that placing a comma after the second <code>"value2"</code> statement would also render that JSON invalid. Note that these commas are equally important in separating JSON objects:</p>
<pre><code>{
  "object1": {
    "field": "value"
  },
  "object2": {
    "field": "value"
  }
}</code></pre>
<p>That specification requires the single comma separating the two objects. Placing commas anywhere else, such as after the values, or at the end of “object2”, would then invalidate the JSON.</p>
</div>
</div>
<div class="section level2">
<h2 id="metadata-and-the-deposits-frictionless-workflow">Metadata and the deposits frictionless workflow<a class="anchor" aria-label="anchor" href="#metadata-and-the-deposits-frictionless-workflow"></a>
</h2>
<p>As described in detail in <a href="https://docs.ropensci.org/deposits/articles/frictionless.html">the “frictionless” vignette</a>, deposits is designed to work seamlessly with <a href="https://frictionlessdata.io/" class="external-link">the “frictionless” workflow</a>, via rOpenSci’s <a href="https://docs.ropensci.org/frictionless" class="external-link">“frictionless” R package</a>. For metadata, this means that as soon as a data resource is uploaded to a service (with <a href="https://docs.ropensci.org/deposits/reference/depositsClient.html#method-deposit-upload-file-">the <code>deposit_upload_file()</code> method</a>), a “datapackage.json” file is automatically created and filled with both descriptions of the uploaded file, or “resource” in frictionless terms, as well as the metadata described in this vignette. From that point onward, metadata can be edited directly in the “datapackage.json” file, and both the local client and external deposit can always be updated any time those local data are modified with <a href="https://docs.ropensci.org/deposits/reference/depositsClient.html#method-deposit-update-">the <code>deposit_update()</code> method</a>.</p>
<p>In conclusion: from the moment your deposit has its own “datapackage.json” file, that should be considered the definitive record of all metadata. Any changes you may wish to make to those metadata should be made by directly editing that file, and deposits will update all corresponding local and remote records.</p>
<p>After restarting an R session, a deposits client can be connected to a local deposit by passing the path to the local directory containing deposit data and a “datapackage.json” file as the “metadata” parameter of the <code>new()</code> method:</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cli</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/depositsClient.html">depositsClient</a></span><span class="op">$</span><span class="fu">new</span> <span class="op">(</span></span>
<span>    service <span class="op">=</span> <span class="st">"&lt;service&gt;"</span>,</span>
<span>    metadata <span class="op">=</span> <span class="st">"/&lt;local&gt;/&lt;directory&gt;/&lt;or&gt;/&lt;frictionless_file&gt;"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Equivalently, start an empty deposits client, and fill the metadata with <a href="https://docs.ropensci.org/deposits/reference/depositsClient.html#method-deposit-fill-metadata-">the <code>deposit_fill_metadata()</code> method</a>:</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cli</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/depositsClient.html">depositsClient</a></span><span class="op">$</span><span class="fu">new</span> <span class="op">(</span>service <span class="op">=</span> <span class="st">"&lt;service&gt;"</span><span class="op">)</span></span>
<span><span class="va">path</span> <span class="op">&lt;-</span> <span class="st">"/&lt;local&gt;/&lt;directory&gt;/&lt;or&gt;/&lt;frictionless_file&gt;"</span></span>
<span><span class="va">cli</span><span class="op">$</span><span class="fu">deposit_fill_metadata</span> <span class="op">(</span>metadata <span class="op">=</span> <span class="va">path</span><span class="op">)</span></span></code></pre></div>
<p>The resultant client will fill the “metadata” field with the contents of the “datapackage.json” file. If the deposit also exists remotely, any local changes to “datapackage.json” will be reflected in changes on the remote deposits service, including changes within the copy of “datapackage.json” held there.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start top-4 bottom-8">
            <div class="col-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg">
</div>
            <div class="col-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-github"></div></a>
                        <a href="https://github.com/ropenscilabs" target="_blank" class="external-link"><div class="icon fa fa-flask"></div></a>
                        <a href="https://hachyderm.io/@ropensci" target="_blank" class="external-link"><div class="icon fab fa-mastodon"></div></a>
                        <a href="https://vimeo.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about" class="external-link">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review" class="external-link">Software Review</a></li>
                            <li><a href="https://ropensci.org/about#team" class="external-link">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers" class="external-link">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate" class="external-link">Donate</a></li>
                            <li><a href="https://ropensci.org/contact" class="external-link">Contact Us</a></li>
                        </ul>
</div>
                    <div class="col-md-3 col-sm-4">
                        <ul>
<h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/" class="external-link">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/" class="external-link">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/" class="external-link">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/" class="external-link">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct" class="external-link">Code of conduct</a></li>
                        </ul>
</div>
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/" class="external-link">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/" class="external-link">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/" class="external-link">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/" class="external-link">Documentation</a></li>
                            <li><a href="https://ropensci.org/news/" class="external-link">Newsletter</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/" class="external-link">Cite rOpenSci</a></li>
                        </ul>
</div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" class="external-link">NumFOCUS</a>.</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->


    </footer>
</div>

  

  

  </body>
</html>
